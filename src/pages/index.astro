---
import {bones} from '../data/bones.js'
import {findToday, shortDesc} from '../lib/bone-utils.js'
import BoneDay from '../components/BoneDay.astro'


let title = 'Is it a Bones Day?';
const data = bones;
const recent = findToday(data.allTime);
---
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <title>{title}</title>

        <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    
    <link rel="stylesheet" href="/style/global.css">
</head>
<body>
    <main>
        <header>
            <h1>Is today a Bones Day?</h1>
            {
                'today' in recent ?
                    <BoneDay day={recent.today} /> :
                    <div class="no-recent">
                        <div>We don&apos;t have a forecast yet, but the most recent forecast was</div>
                        <BoneDay day={recent.mostRecent} />
                    </div>
            }
        </header>

    </main>
    <aside>
        <h2>Recent Forecasts</h2>
        <div class='forecasts'>
        {
            data.allTime.map(day => <div>
            <span>{day.date.asIsoString()}</span><span>{shortDesc(day)}</span>
            </div>)
        }
        </div>
    </aside>
</body>
</html>
